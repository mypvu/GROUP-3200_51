---
import Layout from "@/layouts/Layout.astro";
---

<head>
    <meta charset="UTF-8" />
    <title>HTPLC Compound Matcher</title>
</head>

<Layout title="Home">
    <div class="flex h-[90%] flex-col justify-center">
        <!-- Title -->
        <header class="mt-15 text-center">
            <img
                src="/GROUP-3200_51/images/UWA_logo.png"
                class="mx-auto h-20 w-auto"
            />
            <h1 class="mt-5 text-5xl font-bold text-gray-800">
                HTPLC Compound Matcher
            </h1>
        </header>

        <main
            class="relative mt-2 flex flex-1 items-center justify-center px-4"
        >
            {/* Left decorative image */}
            <img
                src="/GROUP-3200_51/images/left.png"
                alt="Decorative circle left"
                class="pointer-events-none absolute top-2 left-20 hidden h-50 w-50 object-contain opacity-90 select-none md:block xl:left-45"
                style="transform: rotate(90deg);"
            />
            <img
                src="/GROUP-3200_51/images/left.png"
                alt="Decorative circle left lower"
                class="pointer-events-none absolute top-100 left-20 hidden h-35 w-35 object-contain opacity-90 select-none md:block xl:left-40"
            />

            {/* Right decorative image */}
            <img
                src="/GROUP-3200_51/images/left.png"
                alt="Decorative circle right"
                class="pointer-events-none absolute top-50 right-15 hidden h-35 w-35 object-contain opacity-90 select-none md:block xl:right-45"
                style="padding-bottom: 20px;"
            />

            <div
                class="relative z-10 flex flex-col items-center gap-12 lg:flex-row"
            >
                <!-- Left side buttons -->
                <div class="flex flex-col gap-6">
                    <a
                        href="/GROUP-3200_51/analysis/sessions"
                        class="btn-hover-effect w-48 rounded-2xl border-2 border-black bg-white px-6 py-9 text-center text-xl font-semibold hover:bg-gray-100"
                    >
                        Saved<br />Analyses
                    </a>
                </div>

                <!-- Divider -->
                <div class="hidden h-40 w-px bg-gray-300 lg:block"></div>

                <!-- Right side main box -->
                <div
                    class="flex flex-col items-center justify-center rounded-2xl border-2 border-black bg-white px-20 py-20"
                >
                    <h2
                        id="start-new-analysis"
                        class="mb-8 text-3xl font-semibold text-gray-800"
                    >
                        Start New Analysis
                    </h2>
                    <a
                        id="start-new-analysis-button"
                        class="btn-hover-effect flex h-16 w-16 cursor-pointer items-center justify-center rounded-full border-2 border-black bg-blue-100 hover:bg-blue-100"
                    >
                        <span class="text-3xl font-bold">â†’</span>
                    </a>
                </div>
            </div>
        </main>
    </div>
</Layout>

<script>
    import SessionService from "@/logic/session/session_service.ts";
    import { navigate } from "astro:transitions/client";

    async function startNewAnalysis() {
        const sessionService = SessionService.getInstance();

        // create a new session (even if one already exists)
        await sessionService.createNewSession();

        // move to the new analysis page
        navigate(import.meta.env.BASE_URL + "/analysis/new");
    }

    document.getElementById("start-new-analysis-button").onclick =
        startNewAnalysis;
</script>
